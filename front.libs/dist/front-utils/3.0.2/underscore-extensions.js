/* front.utils - v3.0.2 */
(function(){var Utils,ref,bind=function(fn,me){return function(){return fn.apply(me,arguments)}},hasProp={}.hasOwnProperty,slice=[].slice;Utils=function(){function Utils(){this._extend=bind(this._extend,this),this._getDecimalDigits=bind(this._getDecimalDigits,this),this._getThousandsSeparator=bind(this._getThousandsSeparator,this),this._getDecimalSeparator=bind(this._getDecimalSeparator,this),this._getStartsWithCurrency=bind(this._getStartsWithCurrency,this),this._getCurrency=bind(this._getCurrency,this),this.unFlattenObj=bind(this.unFlattenObj,this),this.flattenObj=bind(this.flattenObj,this),this.mapObj=bind(this.mapObj,this),this.hash=bind(this.hash,this),this.spacesToHyphens=bind(this.spacesToHyphens,this),this.sanitize=bind(this.sanitize,this),this.plainChars=bind(this.plainChars,this),this.maskInfo=bind(this.maskInfo,this),this.maskString=bind(this.maskString,this),this.capitalizeSentence=bind(this.capitalizeSentence,this),this.capitalize=bind(this.capitalize,this),this.capitalizeWord=bind(this.capitalizeWord,this),this.dateFromISO8601=bind(this.dateFromISO8601,this),this.urlParams=bind(this.urlParams,this),this.getCookieValue=bind(this.getCookieValue,this),this.readCookie=bind(this.readCookie,this),this.pad=bind(this.pad,this),this.formatCurrency=bind(this.formatCurrency,this)}return Utils.prototype.formatCurrency=function(value,options){var decimalPart,defaults,opts,ref,wholePart;return defaults={decimalSeparator:this._getDecimalSeparator(),thousandsSeparator:this._getThousandsSeparator(),absolute:!1,decimalPlaces:this._getDecimalDigits()},(opts=this._extend(defaults,options)).absolute&&value<0&&(value=-value),value=value.toFixed(opts.decimalPlaces),ref=value.split("."),wholePart=ref[0],decimalPart=ref[1],wholePart=wholePart.replace(/\B(?=(\d{3})+(?!\d))/g,opts.thousandsSeparator),opts.decimalPlaces>0?wholePart+opts.decimalSeparator+decimalPart:wholePart},Utils.prototype.intAsCurrency=function(value,options){var currencySymbol;return currencySymbol=options&&options.currencySymbol?options.currencySymbol:this._getCurrency(),(options&&options.currencySymbol?options.currencySymbol:this._getStartsWithCurrency())?currencySymbol+Utils.formatCurrency(value/100,options):Utils.formatCurrency(value/100,options)+" "+currencySymbol},Utils.prototype.pad=function(str,max,options){var defaults,opts,toadd;return defaults={char:"0",position:"left"},opts=this._extend(defaults,options),opts.char=opts.char.charAt(0),str+="",toadd=Array(max-str.length+1).join(opts.char),"right"===opts.position?str+toadd:toadd+str},Utils.prototype.readCookie=function(name){var ARRcookies,j,key,len,pair,value;for(j=0,len=(ARRcookies=document.cookie.split(";")).length;j<len;j++)if(pair=ARRcookies[j],key=pair.substr(0,pair.indexOf("=")).replace(/^\s+|\s+$/g,""),value=pair.substr(pair.indexOf("=")+1),key===name)return unescape(value)},Utils.prototype.getCookieValue=function(cookie,name){var j,key,len,subcookie,subcookies,value;for(j=0,len=(subcookies=cookie.split("&")).length;j<len;j++)if(subcookie=subcookies[j],key=subcookie.substr(0,subcookie.indexOf("=")),value=subcookie.substr(subcookie.indexOf("=")+1),key===name)return unescape(value)},Utils.prototype.urlParams=function(){var decode,match,params,plus,query,search;for(params={},search=/([^&=]+)=?([^&]*)/g,plus=/\+/g,decode=function(s){try{return decodeURIComponent(s.replace(plus," "))}catch(error){return s.replace(plus," ")}},query=window.location.search.substring(1);match=search.exec(query);)params[decode(match[1])]=decode(match[2]);return params},Utils.prototype.dateFromISO8601=function(isostr){var part1,parts;return parts=isostr.match(/\d+/g),part1=parts[1]-1,new Date(parts[0],part1,parts[2],parts[3],parts[4],parts[5])},Utils.prototype.capitalizeWord=function(word){return null==word&&(word=""),word.charAt(0).toUpperCase()+word.slice(1)},Utils.prototype.capitalize=function(word){return null==word&&(word=""),this.capitalizeWord(word)},Utils.prototype.capitalizeSentence=function(sentence){var oldWords,word;return null==sentence&&(sentence=""),oldWords=sentence.toLowerCase().split(" "),function(){var j,len,results;for(results=[],j=0,len=oldWords.length;j<len;j++)word=oldWords[j],results.push(this.capitalizeWord(word));return results}.call(this).join(" ")},Utils.prototype.maskString=function(str,mask,fixedChars){var argString,fixedCharsRegex,maskString;return null==fixedChars&&(fixedChars="[(),.:/ -]"),argString="string"==typeof str?str:String(str),maskString=(null!=mask?mask.mask:void 0)||mask,fixedCharsRegex=new RegExp(fixedChars),"9","A",function(valueArray,maskArray,fixed){var i,j,len,maskedValueArray,noMatchDigit,noMatchLetter;for(maskedValueArray=valueArray.slice(0),i=j=0,len=maskArray.length;j<len&&(maskArray[i],maskedValueArray[i]&&maskArray[i]);i=++j){if(noMatchDigit="9"===maskArray[i]&&!/\d/.test(maskedValueArray[i]),noMatchLetter="A"===maskArray[i].toUpperCase()&&!/[a-zA-Z\u00C0-\u017F]/.test(maskedValueArray[i]),noMatchDigit||noMatchLetter)return valueArray;if(fixed.test(maskArray[i])){if(maskArray[i]===maskedValueArray[i])continue;maskedValueArray.splice(i,0,maskArray[i])}}return maskedValueArray}(argString.split(""),maskString.split(""),fixedCharsRegex).join("")},Utils.prototype.maskInfo=function(info){var maskRegex,maskText;return maskRegex=/\*/g,maskText='<span class="masked-info">*</span>',info?info.replace(maskRegex,maskText):info},Utils.prototype.plainChars=function(str){var plain,regex,specialChars;if(null!=str)return specialChars="ąàáäâãåæćęèéëêìíïîłńòóöôõøśùúüûñçżź",plain="aaaaaaaaceeeeeiiiilnoooooosuuuunczz",regex=new RegExp("["+specialChars+"]","g"),(str+="").replace(regex,function(char){return plain.charAt(specialChars.indexOf(char))})},Utils.prototype.sanitize=function(str){var s;return(s=this.plainChars(str.replace(/\s/g,"")).replace(/\/|\\/g,"-").replace(/\(|\)|\'|\"/g,"").toLowerCase().replace(/\,/g,"V").replace(/\./g,"P").replace(/\:/g,"D")).charAt(0).toUpperCase()+s.slice(1)},Utils.prototype.spacesToHyphens=function(str){return str.replace(/\ /g,"-")},Utils.prototype.hash=function(str){var hashed,j,len;for(hashed=0,j=0,len=str.length;j<len;j++)hashed=(hashed<<5)-hashed+str[j].charCodeAt(0),hashed&=hashed;return hashed},Utils.prototype.mapObj=function(obj,f){var k,obj2,v;obj2={};for(k in obj)hasProp.call(obj,k)&&(v=obj[k],obj2[k]=f(k,v));return obj2},Utils.prototype.flattenObj=function(obj,target,prefix){var ref;if(null==("undefined"!=typeof window&&null!==window&&null!=(ref=window._)?ref.reduce:void 0))throw"This function requires Underscore";return prefix=prefix||"",_.reduce(obj,function(_this){return function(result,value,key){return _.isObject(value)?_this.flattenObj(value,result,prefix+key+"."):result[prefix+key]=value,result}}(this),target||{})},Utils.prototype.unFlattenObj=function(obj){var ref;if(null==("undefined"!=typeof window&&null!==window&&null!=(ref=window._)?ref.reduce:void 0))throw"This function requires Underscore";return _.reduce(obj,function(result,value,keys){var current,limit,partitions;return current=result,partitions=keys.split("."),limit=partitions.length-1,_.each(partitions,function(key,index){return current=current[key]=index===limit?value:current[key]||{}}),result},{})},Utils.prototype.padStr=function(str,limit,padding){return(padding+str).split("").reverse().slice(0,limit).reverse().join("")},Utils.prototype.dateFormat=function(date){return"string"==typeof date&&(date=new Date(date)),this.padStr(date.getDate(),2,"00")+"/"+this.padStr(date.getMonth()+1,2,"00")+"/"+date.getFullYear()},Utils.prototype.dateFormatUS=function(date){return"string"==typeof date&&(date=new Date(date)),date.getMonth()+1+"/"+this.padStr(date.getDate(),2,"00")+"/"+date.getFullYear()},Utils.prototype._getCurrency=function(){var ref,ref1;return(null!=(ref=window.vtex)&&null!=(ref1=ref.i18n)&&"function"==typeof ref1.getCurrency?ref1.getCurrency():void 0)||"R$ "},Utils.prototype._getStartsWithCurrency=function(){var ref,ref1;return(null!=(ref=window.vtex)&&null!=(ref1=ref.i18n)&&"function"==typeof ref1.getStartsWithCurrency?ref1.getStartsWithCurrency():void 0)||!1},Utils.prototype._getDecimalSeparator=function(){var ref,ref1;return(null!=(ref=window.vtex)&&null!=(ref1=ref.i18n)&&"function"==typeof ref1.getDecimalSeparator?ref1.getDecimalSeparator():void 0)||","},Utils.prototype._getThousandsSeparator=function(){var ref,ref1;return(null!=(ref=window.vtex)&&null!=(ref1=ref.i18n)&&"function"==typeof ref1.getThousandsSeparator?ref1.getThousandsSeparator():void 0)||"."},Utils.prototype._getDecimalDigits=function(){var ref,ref1,ref2,ref3;return null!=(null!=(ref=window.vtex)&&null!=(ref1=ref.i18n)?ref1.getDecimalDigits:void 0)?null!=(ref2=window.vtex)&&null!=(ref3=ref2.i18n)?ref3.getDecimalDigits():void 0:2},Utils.prototype._extend=function(){var j,len,obj,prop,source,sources;for(obj=arguments[0],j=0,len=(sources=2<=arguments.length?slice.call(arguments,1):[]).length;j<len;j++)if(source=sources[j])for(prop in source)obj[prop]=source[prop];return obj},Utils}(),"undefined"!=typeof window&&null!==window&&null!=(ref=window._)&&"function"==typeof ref.mixin&&ref.mixin(new Utils)}).call(this);
//# sourceMappingURL=underscore-extensions.js.map